<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />

    <!---display in device width-->
    <meta name="viewport" content="width=device-width" />

    <meta name="author" content="Katherine Fagrell" />
    <meta
      name="description"
      content="This is the website for our experiment on climate change cognition."
    />

    <title>Experiment</title>


    <!--add Pavlovia functionality-->
    <!---removed pavlovia functionality for this page-->
    <script src="https://unpkg.com/jspsych@8.2.1"></script>   <!--"quoted from pavlovia doc"--->

    <!--jsPsych and plugins-->
    <!---<script src="https://unpkg.com/jspsych@7.3.4"></script>--->
    <link
      href="https://unpkg.com/jspsych@7.3.4/css/jspsych.css"
      rel="stylesheet"
      type="text/css"
    />

    <script src="https://unpkg.com/@jspsych/plugin-preload@1.1.3"></script>
    <script src="https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0"></script>
    <script src="https://unpkg.com/@jspsych/plugin-survey-likert@1.1.3"></script>
    <script src="https://unpkg.com/@jspsych/plugin-instructions@1.1.4"></script>

    <!--link jsPsych css stylesheet-->
    <link
      href="https://unpkg.com/jspsych@8.2.2/css/jspsych.css"
      rel="stylesheet"
      type="text/css"
    />
  </head>

  <body></body>

  <script>
    //this experiment using likert scales will record the follow data for each participant:
    //response, response time in milliseconds, question order

    //this is where the JavaScript will go to add functionality to the website

    //initialize jsPsych
    const jsPsych = initJsPsych();

    //initialize Pavlovia connection
    //

    //trial to finish connection with pavlovia.org 
    //

    //initialize timeline with empty array, trials will be added as they are created
    let timeline = [];



    var preload = {
      type: jsPsychPreload,
      images: ["condition1.png", "condition2.png"], // images are binary_0.421774511013192_ & continuous_0.389863323689087_.png respectively from lake_experiment_dallinger with labels removed and renamed
    };

    const likert_scale = [
      "Strongly Disagree",
      "Disagree",
      "Neutral",
      "Agree",
      "Strongly Agree",
    ];

    //condition 1 = binary data graph
    const condition1LikertScaleTrial1 = {
      type: jsPsychSurveyLikert,
      preamble: '<img src="condition1.png" style="width: 90%"></img>',
      questions: [
        {
          prompt: "This is question 1.",
          labels: likert_scale,
          required: true,
        }
    ]
    };

    const condition1LikertScaleTrial2 = {
      type: jsPsychSurveyLikert,
      preamble: '<img src="condition1.png" style="width: 90%"></img>',
      questions: [
        {
          prompt: "This is question 2.",
          labels: likert_scale,
          required: true,
        }
    ]
    };

    const condition1LikertScaleTrial3 = {
      type: jsPsychSurveyLikert,
      preamble: '<img src="condition1.png" style="width: 90%"></img>',
      questions: [
        {
          prompt: "This is question 3.",
          labels: likert_scale,
          required: true,
        }
    ]
    };

    const condition1LikertScaleTrial4 = {
      type: jsPsychSurveyLikert,
      preamble: '<img src="condition1.png" style="width: 90%"></img>',
      questions: [
        {
          prompt: "This is question 4.",
          labels: likert_scale,
          required: true,
        }
    ]
    };

    const condition1LikertScaleTrial5 = {
      type: jsPsychSurveyLikert,
      preamble: '<img src="condition1.png" style="width: 90%"></img>',
      questions: [
        {
          prompt: "This is question 5.",
          labels: likert_scale,
          required: true,
        }
    ]
    };

    const condition1LikertScaleTrial6 = {
      type: jsPsychSurveyLikert,
      preamble: '<img src="condition1.png" style="width: 90%"></img>',
      questions: [
        {
          prompt: "This is question 6.",
          labels: likert_scale,
          required: true,
        }
    ]
    };

    const condition1LikertScaleTrial7 = {
      type: jsPsychSurveyLikert,
      preamble: '<img src="condition1.png" style="width: 90%"></img>',
      questions: [
        {
          prompt: "This is question 7.",
          labels: likert_scale,
          required: true,
        }
    ]
    };

    //condition 2 = cont graph
    const condition2LikertScaleTrial1 = {
      type: jsPsychSurveyLikert,
      preamble: '<img src="condition1.png" style="width: 90%"></img>',
      questions: [
        {
          prompt: "This is question 1.",
          labels: likert_scale,
          required: true,
        }
    ]
    };

    const condition2LikertScaleTrial2 = {
      type: jsPsychSurveyLikert,
      preamble: '<img src="condition1.png" style="width: 90%"></img>',
      questions: [
        {
          prompt: "This is question 2.",
          labels: likert_scale,
          required: true,
        }
    ]
    }  ;

    const condition2LikertScaleTrial3 = {
      type: jsPsychSurveyLikert,
      preamble: '<img src="condition1.png" style="width: 90%"></img>',
      questions: [
        {
          prompt: "This is question 3.",
          labels: likert_scale,
          required: true,
        }
    ]
    } ;   
    const condition2LikertScaleTrial4 = {
      type: jsPsychSurveyLikert,
      preamble: '<img src="condition1.png" style="width: 90%"></img>',
      questions: [
        {
          prompt: "This is question 4.",
          labels: likert_scale,
          required: true,
        }
    ]
    } ;   
    
    const condition2LikertScaleTrial5 = {
      type: jsPsychSurveyLikert,
      preamble: '<img src="condition1.png" style="width: 90%"></img>',
      questions: [
        {
          prompt: "This is question 5.",
          labels: likert_scale,
          required: true,
        }
    ]
    }    ;
    
    const condition2LikertScaleTrial6 = {
      type: jsPsychSurveyLikert,
      preamble: '<img src="condition1.png" style="width: 90%"></img>',
      questions: [
        {
          prompt: "This is question 6.",
          labels: likert_scale,
          required: true,
        }
    ]
    }  ;  
    
    const condition2LikertScaleTrial7 = {
      type: jsPsychSurveyLikert,
      preamble: '<img src="condition1.png" style="width: 90%"></img>',
      questions: [
        {
          prompt: "This is question 7.",
          labels: likert_scale,
          required: true,
        }
    ]
    };



    //add to experiment timeline

    //trial 1: welcome page
    //add examples if needed
    const instructions = {
      type: jsPsychInstructions,
      pages: [
        "Welcome to the experiment. Press the 'next' button to begin.",
        "In this experiment, you will be shown multiple graphs of data and will be asked for your opinion about their significance",
        "By pressing 'next' to begin the experiment, you consent to the following: *insert consent here*",
      ],
      show_clickable_nav: true,
    };

    timeline.push(instructions);

    //trial 2: random assignment to condition 1 (binary) or condition 2 (continuous)
    // credit = https://www.jspsych.org/v8/reference/jspsych-randomization/#sample-with-equal-probability
    
    var trialArrayCondition1 = [condition1LikertScaleTrial1, 
                        condition1LikertScaleTrial2,
                        condition1LikertScaleTrial3,
                        condition1LikertScaleTrial4,
                        condition1LikertScaleTrial5,
                        condition1LikertScaleTrial6,
                        condition1LikertScaleTrial7
                    ];

    var shuffledTrialArrayCondition1 = jsPsych.randomization.repeat(trialArrayCondition1, 1); //shuffle array, no repeats


    var trialArrayCondition2 = [condition2LikertScaleTrial1, 
                        condition2LikertScaleTrial2,
                        condition2LikertScaleTrial3,
                        condition2LikertScaleTrial4,
                        condition2LikertScaleTrial5,
                        condition2LikertScaleTrial6,
                        condition2LikertScaleTrial7
                    ];
                    
    var shuffledTrialArrayCondition2 = jsPsych.randomization.repeat(trialArrayCondition2, 1); //shuffle array, no repeats


    
    const myArray = [1, 2];
    var group = jsPsych.randomization.sampleWithReplacement(myArray, 1);

    //add trials to end of timeline
    if (group == 1 || 2) {
      timeline.push(shuffledTrialArrayCondition1);
    } else {
      timeline.push(shuffledTrialArrayCondition2);
    }

    //trial 3: finish page
    const finishPage = {
      type: jsPsychInstructions,
      pages: [
        "Thank you for your participation. If you ran into any issues, please message the researchers at cocopolucla@gmail.com.",
      ],
      show_clickable_nav: true,
    };
    timeline.push(finishPage);

    //

    //run experiment
    jsPsych.run(timeline);
  </script>
</html>
