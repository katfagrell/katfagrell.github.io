<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />

    <!---display in device width-->
    <meta name="viewport" content="width=device-width" />

    <meta name="author" content="Katherine Fagrell" />
    <meta
      name="description"
      content="This is the website for our experiment on climate change cognition."
    />

    <title>Experiment</title>

    <!--jsPsych and plugins-->
    <script src="https://unpkg.com/jspsych@7.3.4"></script>
    <link
      href="https://unpkg.com/jspsych@7.3.4/css/jspsych.css"
      rel="stylesheet"
      type="text/css"
    />
    <script src="https://unpkg.com/@jspsych/plugin-preload@1.1.3"></script>
    <script src="https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0"></script>
    <script src="https://unpkg.com/@jspsych/plugin-survey-likert@1.1.3"></script>
    <script src="https://unpkg.com/@jspsych/plugin-instructions@1.1.4"></script>

    <!--link css stylesheet-->
    <link
      href="https://unpkg.com/jspsych@8.2.2/css/jspsych.css"
      rel="stylesheet"
      type="text/css"
    />
  </head>
  <body></body>

  <script>
    //this is where the JavaScript will go to add functionality to the website

    //initialize jsPsych
    const jsPsych = initJsPsych();

    //initialize timeline with empty array, trials will be added as they are created
    var timeline = [];

    var preload = {
      type: jsPsychPreload,
      images: ["condition1.png", "condition2.png"],
    };

    const likert_scale = [
      "Strongly Disagree",
      "Disagree",
      "Neutral",
      "Agree",
      "Strongly Agree",
    ];

    const condition1LikertScale = {
      type: jsPsychSurveyLikert,
      questions: [
        {
          prompt: '<img src="condition1.png"></img><p>This is binary.</p>',
          labels: likert_scale,
          required: true,
        },
        {
          prompt: '<img src="condition1.png"></img><p>This is binary.</p>',
          labels: likert_scale,
          required: true,
        },
      ],
      randomize_question_order: true,
    };

    const condition2LikertScale = {
      type: jsPsychSurveyLikert,
      preamble: '<img src="condition2.png"></img>',
      questions: [
        {
          prompt: "This is cont.",
          labels: likert_scale,
        },
      ],
      randomize_question_order: true,
    };

    //create trial timeline

    //trial 1: welcome page **change so you prompt a specific key
    //add examples if needed
    const instructions = {
      type: jsPsychInstructions,
      pages: [
        "Welcome to the experiment. Press the button to begin.",
        "In this experiment, you will be shown multiple graphs of data and wil be asked for your opinion about their significance",
      ],
      show_clickable_nav: true,
    };

    timeline.push(instructions);

    //trial 2: random assignment to condition 1 (binary) or condition 2 (continuous)
    // credit = https://www.jspsych.org/v8/reference/jspsych-randomization/#sample-with-equal-probability
    const myArray = [1, 2];
    var group = jsPsych.randomization.sampleWithReplacement(myArray, 1);

    //add trial 2 to end of timeline
    if (group == 1 || 2) {
      timeline.push(condition1LikertScale);
    } else {
      timeline.push(condition2LikertScale);
    }

    //run experiment
    jsPsych.run(timeline);

    //this experiment using likert scales will record the follow data for each participant:
    //response, response time in milliseconds, question order
  </script>
</html>
